(window.webpackJsonp=window.webpackJsonp||[]).push([["npm.web3-providers-ws"],{"9f72":function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty,s="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function c(e,t,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var c=new r(n,o||e,i),u=s?s+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],c]:e._events[u].push(c):(e._events[u]=c,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(s=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=s?s+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,r=new Array(i);o<i;o++)r[o]=n[o].fn;return r},a.prototype.listenerCount=function(e){var t=s?s+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,o,i,r){var c=s?s+e:e;if(!this._events[c])return!1;var u,a,h=this._events[c],p=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),p){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,o),!0;case 5:return h.fn.call(h.context,t,n,o,i),!0;case 6:return h.fn.call(h.context,t,n,o,i,r),!0}for(a=1,u=new Array(p-1);a<p;a++)u[a-1]=arguments[a];h.fn.apply(h.context,u)}else{var l,f=h.length;for(a=0;a<f;a++)switch(h[a].once&&this.removeListener(e,h[a].fn,void 0,!0),p){case 1:h[a].fn.call(h[a].context);break;case 2:h[a].fn.call(h[a].context,t);break;case 3:h[a].fn.call(h[a].context,t,n);break;case 4:h[a].fn.call(h[a].context,t,n,o);break;default:if(!u)for(l=1,u=new Array(p-1);l<p;l++)u[l-1]=arguments[l];h[a].fn.apply(h[a].context,u)}}return!0},a.prototype.on=function(e,t,n){return c(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return c(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,n,o){var i=s?s+e:e;if(!this._events[i])return this;if(!t)return u(this,i),this;var r=this._events[i];if(r.fn)r.fn!==t||o&&!r.once||n&&r.context!==n||u(this,i);else{for(var c=0,a=[],h=r.length;c<h;c++)(r[c].fn!==t||o&&!r[c].once||n&&r[c].context!==n)&&a.push(r[c]);a.length?this._events[i]=1===a.length?a[0]:a:u(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=s,a.EventEmitter=a,e.exports=a},a4ca:function(e,t,n){"use strict";var o=n("9f72"),s=n("efab"),i=n("c044").errors,r=n("7e3c").w3cwebsocket,c=function(e,t){o.call(this),t=t||{},this.url=e,this._customTimeout=t.timeout||15e3,this.headers=t.headers||{},this.protocol=t.protocol||void 0,this.reconnectOptions=Object.assign({auto:!1,delay:5e3,maxAttempts:!1,onTimeout:!1},t.reconnect),this.clientConfig=t.clientConfig||void 0,this.requestOptions=t.requestOptions||void 0,this.DATA="data",this.CLOSE="close",this.ERROR="error",this.CONNECT="connect",this.RECONNECT="reconnect",this.connection=null,this.requestQueue=new Map,this.responseQueue=new Map,this.reconnectAttempts=0,this.reconnecting=!1;var n=s.parseURL(e);n.username&&n.password&&(this.headers.authorization="Basic "+s.btoa(n.username+":"+n.password)),n.auth&&(this.headers.authorization="Basic "+s.btoa(n.auth)),Object.defineProperty(this,"connected",{get:function(){return this.connection&&this.connection.readyState===this.connection.OPEN},enumerable:!0}),this.connect()};(c.prototype=Object.create(o.prototype)).constructor=c,c.prototype.connect=function(){this.connection=new r(this.url,this.protocol,void 0,this.headers,this.requestOptions,this.clientConfig),this._addSocketListeners()},c.prototype._onMessage=function(e){var t=this;this._parseResponse("string"==typeof e.data?e.data:"").forEach((function(e){if(e.method&&-1!==e.method.indexOf("_subscription"))t.emit(t.DATA,e);else{var n=e.id;Array.isArray(e)&&(n=e[0].id),t.responseQueue.has(n)&&(void 0!==t.responseQueue.get(n).callback&&t.responseQueue.get(n).callback(!1,e),t.responseQueue.delete(n))}}))},c.prototype._onConnect=function(){if(this.emit(this.CONNECT),this.reconnectAttempts=0,this.reconnecting=!1,this.requestQueue.size>0){var e=this;this.requestQueue.forEach((function(t,n){e.send(t.payload,t.callback),e.requestQueue.delete(n)}))}},c.prototype._onClose=function(e){var t=this;!this.reconnectOptions.auto||[1e3,1001].includes(e.code)&&!1!==e.wasClean?(this.emit(this.CLOSE,e),this.requestQueue.size>0&&this.requestQueue.forEach((function(n,o){n.callback(i.ConnectionNotOpenError(e)),t.requestQueue.delete(o)})),this.responseQueue.size>0&&this.responseQueue.forEach((function(n,o){n.callback(i.InvalidConnection("on WS",e)),t.responseQueue.delete(o)})),this._removeSocketListeners(),this.removeAllListeners()):this.reconnect()},c.prototype._addSocketListeners=function(){this.connection.addEventListener("message",this._onMessage.bind(this)),this.connection.addEventListener("open",this._onConnect.bind(this)),this.connection.addEventListener("close",this._onClose.bind(this))},c.prototype._removeSocketListeners=function(){this.connection.removeEventListener("message",this._onMessage),this.connection.removeEventListener("open",this._onConnect),this.connection.removeEventListener("close",this._onClose)},c.prototype._parseResponse=function(e){var t=this,n=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((function(e){t.lastChunk&&(e=t.lastChunk+e);var o=null;try{o=JSON.parse(e)}catch(n){return t.lastChunk=e,clearTimeout(t.lastChunkTimeout),void(t.lastChunkTimeout=setTimeout((function(){t.reconnectOptions.auto&&t.reconnectOptions.onTimeout?t.reconnect():(t.emit(t.ERROR,i.ConnectionTimeout(t._customTimeout)),t.requestQueue.size>0&&t.requestQueue.forEach((function(e,n){e.callback(i.ConnectionTimeout(t._customTimeout)),t.requestQueue.delete(n)})))}),t._customTimeout))}clearTimeout(t.lastChunkTimeout),t.lastChunk=null,o&&n.push(o)})),n},c.prototype.send=function(e,t){var n=e.id,o={payload:e,callback:t};if(Array.isArray(e)&&(n=e[0].id),this.connection.readyState===this.connection.CONNECTING||this.reconnecting)this.requestQueue.set(n,o);else{if(this.connection.readyState!==this.connection.OPEN)return this.requestQueue.delete(n),this.emit(this.ERROR,i.ConnectionNotOpenError()),void o.callback(i.ConnectionNotOpenError());this.responseQueue.set(n,o),this.requestQueue.delete(n);try{this.connection.send(JSON.stringify(o.payload))}catch(e){o.callback(e),this.responseQueue.delete(n)}}},c.prototype.reset=function(){this.responseQueue.clear(),this.requestQueue.clear(),this.removeAllListeners(),this._removeSocketListeners(),this._addSocketListeners()},c.prototype.disconnect=function(e,t){this._removeSocketListeners(),this.connection.close(e||1e3,t)},c.prototype.supportsSubscriptions=function(){return!0},c.prototype.reconnect=function(){var e=this;this.reconnecting=!0,this.responseQueue.size>0&&this.responseQueue.forEach((function(t,n){t.callback(i.PendingRequestsOnReconnectingError()),e.responseQueue.delete(n)})),!this.reconnectOptions.maxAttempts||this.reconnectAttempts<this.reconnectOptions.maxAttempts?setTimeout((function(){e.reconnectAttempts++,e._removeSocketListeners(),e.emit(e.RECONNECT,e.reconnectAttempts),e.connect()}),this.reconnectOptions.delay):(this.emit(this.ERROR,i.MaxAttemptsReachedOnReconnectingError()),this.reconnecting=!1,this.requestQueue.size>0&&this.requestQueue.forEach((function(t,n){t.callback(i.MaxAttemptsReachedOnReconnectingError()),e.requestQueue.delete(n)})))},e.exports=c},efab:function(e,t,n){(function(t,o){var s="[object process]"===Object.prototype.toString.call(void 0!==t?t:0),i="undefined"!=typeof navigator&&"ReactNative"===navigator.product,r=null,c=null;if(s||i){r=function(e){return o.from(e).toString("base64")};var u=n("0b16");if(u.URL){var a=u.URL;c=function(e){return new a(e)}}else c=n("0b16").parse}else r=btoa.bind(window),c=function(e){return new URL(e)};e.exports={parseURL:c,btoa:r}}).call(this,n("4362"),n("b639").Buffer)}}]);